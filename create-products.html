<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Producto</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Crear Producto</h1>
        <form class="product-form" enctype="multipart/form-data">
            <label for="nombre">Nombre del Producto:</label>
            <input type="text" id="nombre" name="nombre" required>

            <label for="precio">Precio Regular:</label>
            <input type="number" id="precio" name="precio" step="0.01" required>

            <label for="descripcion">Descripci√≥n:</label>
            <textarea id="descripcion" name="descripcion" required></textarea>

            <label for="estado">Estado:</label>
            <select id="estado" name="estado" required>
                <option value="disponible">Disponible</option>
                <option value="agotado">Agotado</option>
            </select>

            <button type="submit">Crear Producto</button>
        </form>
        <a href="index.html">Volver al inicio</a>
    </div>
    <script type="module">
      import { db } from './firebase-config.js';
      import { collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js';

      const form = document.querySelector('.product-form');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const nombre = form.nombre.value.trim();
        const precio = parseFloat(form.precio.value);
        const descripcion = form.descripcion.value.trim();
        const estado = form.estado.value;
        // No subimos imagen, solo guardamos los datos
        try {
          await addDoc(collection(db, 'products'), {
            nombre,
            precio,
            descripcion,
            estado,
            createdAt: serverTimestamp()
          });
          alert('Producto creado exitosamente');
          form.reset();
        } catch (err) {
          alert('Error al crear producto: ' + err.message);
        }
      });
    </script>
</body>
</html>
 